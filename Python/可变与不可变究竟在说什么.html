<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>可变与不可变究竟在说什么 | KEAE的编程笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="一个技术宅的自用地">
    
    <link rel="preload" href="/code/assets/css/0.styles.e6f607d0.css" as="style"><link rel="preload" href="/code/assets/js/app.52292b80.js" as="script"><link rel="preload" href="/code/assets/js/2.f5f720f3.js" as="script"><link rel="preload" href="/code/assets/js/20.1cc3b5e3.js" as="script"><link rel="prefetch" href="/code/assets/js/10.1cd551db.js"><link rel="prefetch" href="/code/assets/js/11.a0238dbd.js"><link rel="prefetch" href="/code/assets/js/12.f7aba09d.js"><link rel="prefetch" href="/code/assets/js/13.a8f0878f.js"><link rel="prefetch" href="/code/assets/js/14.081733ca.js"><link rel="prefetch" href="/code/assets/js/15.ad2ff038.js"><link rel="prefetch" href="/code/assets/js/16.530499b2.js"><link rel="prefetch" href="/code/assets/js/17.dd30e381.js"><link rel="prefetch" href="/code/assets/js/18.195a0cd9.js"><link rel="prefetch" href="/code/assets/js/19.f235132d.js"><link rel="prefetch" href="/code/assets/js/21.f67f5232.js"><link rel="prefetch" href="/code/assets/js/22.15aa69e0.js"><link rel="prefetch" href="/code/assets/js/23.5e15e1da.js"><link rel="prefetch" href="/code/assets/js/24.829d33f6.js"><link rel="prefetch" href="/code/assets/js/25.e0ad6b1e.js"><link rel="prefetch" href="/code/assets/js/26.003de6f3.js"><link rel="prefetch" href="/code/assets/js/27.d766081a.js"><link rel="prefetch" href="/code/assets/js/28.6ca4d4ef.js"><link rel="prefetch" href="/code/assets/js/29.f36b0856.js"><link rel="prefetch" href="/code/assets/js/3.db467800.js"><link rel="prefetch" href="/code/assets/js/30.5e325b78.js"><link rel="prefetch" href="/code/assets/js/4.2699a4d5.js"><link rel="prefetch" href="/code/assets/js/5.e4f95c24.js"><link rel="prefetch" href="/code/assets/js/6.387520d9.js"><link rel="prefetch" href="/code/assets/js/7.67ad4847.js"><link rel="prefetch" href="/code/assets/js/8.82ac6f22.js"><link rel="prefetch" href="/code/assets/js/9.283c78b1.js">
    <link rel="stylesheet" href="/code/assets/css/0.styles.e6f607d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/code/" class="home-link router-link-active"><!----> <span class="site-name">KEAE的编程笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/code/" class="nav-link">
    主页
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/java/" class="nav-link">
    Java
  </a></li><li class="dropdown-item"><!----> <a href="/code/python/" class="nav-link">
    Python
  </a></li><li class="dropdown-item"><!----> <a href="/code/mysql/" class="nav-link">
    MySQL
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/计算机系统/" class="nav-link">
    计算机系统
  </a></li><li class="dropdown-item"><!----> <a href="/code/计算机网络/" class="nav-link">
    计算机网络
  </a></li></ul></div></div><div class="nav-item"><a href="/code/about/" class="nav-link">
    关于
  </a></div><div class="nav-item"><a href="https://github.com/KEAE12315" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/code/" class="nav-link">
    主页
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/java/" class="nav-link">
    Java
  </a></li><li class="dropdown-item"><!----> <a href="/code/python/" class="nav-link">
    Python
  </a></li><li class="dropdown-item"><!----> <a href="/code/mysql/" class="nav-link">
    MySQL
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/计算机系统/" class="nav-link">
    计算机系统
  </a></li><li class="dropdown-item"><!----> <a href="/code/计算机网络/" class="nav-link">
    计算机网络
  </a></li></ul></div></div><div class="nav-item"><a href="/code/about/" class="nav-link">
    关于
  </a></div><div class="nav-item"><a href="https://github.com/KEAE12315" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/code/Python/" aria-current="page" class="sidebar-link">基础设置</a></li><li><a href="/code/Python/可变与不可变究竟在说什么.html" class="active sidebar-link">可变与不可变究竟在说什么</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/code/Python/可变与不可变究竟在说什么.html#python中的数据类型" class="sidebar-link">Python中的数据类型</a></li><li class="sidebar-sub-header"><a href="/code/Python/可变与不可变究竟在说什么.html#对变量进行分析" class="sidebar-link">对变量进行分析</a></li><li class="sidebar-sub-header"><a href="/code/Python/可变与不可变究竟在说什么.html#其它需要注意的" class="sidebar-link">其它需要注意的</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="python中的数据类型"><a href="#python中的数据类型" class="header-anchor">#</a> Python中的数据类型</h2> <ul><li>Numbers</li> <li>String</li> <li>List</li> <li>Tuple</li> <li>Set</li> <li>Dictionary</li></ul> <p><strong>python中不可变数据类型的定义为</strong>: 当该数据类型的对应变量的值发生了改变, 那么它对应的内存地址也会发生改变. 也就是说, 直接修改内存中的值, 并没有开辟新的内存. 反之就为可变类型.</p> <p>不可变数据类型: numbers, string, tuple<br>
可变数据类型: list, set, dictionary</p> <h2 id="对变量进行分析"><a href="#对变量进行分析" class="header-anchor">#</a> 对变量进行分析</h2> <p>id(): 获取对象的内存地址.<br>
type(): 当只有一个参数的时候, 返回对象的类型. 当有三个参数的时候返回一个类对象.<br>
==: 值比较.<br>
is: 比较两个对象的物理id, 相当于 id(a)==id(b).</p> <h2 id="其它需要注意的"><a href="#其它需要注意的" class="header-anchor">#</a> 其它需要注意的</h2> <p>Python出于对性能的考虑, 但凡是不可变对象, 在同一个代码块中的对象, 只有是值相同的对象, 就不会重复创建, 而是直接引用已经存在的对象.</p> <p><strong>Integer object pool</strong>: This pool holds numbers of PyIntObjects which has been allocated already but not initialized (no valid value or type). Even though there is only one integer object pool. This pool is divided into 2 parts, small integers and big integers. Big integers are exactly the case mentioned above, where PyIntObject is used as a container for the integer and even integers having the same value have their own PyIntObject.</p> <p><strong>String Interning in Python</strong>: The string interning in Python is a mechanism of storing only one copy of a string value in the memory. If there are a few string variables whose values are the same, they will be interned by Python implicitly and refer to the same object in the memory.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; x, y = 100, 40000
&gt;&gt;&gt; id(2 * x + y) == id(300 + x)
True
&gt;&gt;&gt; 2 * x + y, 300 + x
(40200, 400)
</code></pre></div><p>The two expressions 2 * x + y and 300 + x don't have overlapping lifetimes. That means that Python can calculate the left hand side, take its id, and then free the integer before it calculates the right hand side. When CPython frees an integer it puts it on a list of freed integers and then re-uses it for a different integer the next time it needs one. So your ids match even when the result of the calculations are very different:</p> <blockquote><p>参考资料</p> <ul><li>https://zhuanlan.zhihu.com/p/68577036及评论</li> <li>https://stackoverflow.com/questions/6101379/what-happens-behind-the-scenes-when-python-adds-small-ints</li> <li><strong>https://davejingtian.org/2014/12/11/python-internals-integer-object-pool-pyintobject/</strong></li> <li>https://medium.com/techtofreedom/string-interning-in-python-a-hidden-gem-that-makes-your-code-faster-9be71c7a5f3e</li></ul></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/code/Python/" class="prev router-link-active">
          基础设置
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/code/assets/js/app.52292b80.js" defer></script><script src="/code/assets/js/2.f5f720f3.js" defer></script><script src="/code/assets/js/20.1cc3b5e3.js" defer></script>
  </body>
</html>
